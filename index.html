<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
        <script src="https://unpkg.com/vue"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="app">
            <div id="main">
                <div class="box-row" v-for="row in MAXHEIGHT">
                    <a class="box" v-for="col in MAXWDITH" :class="{'snack': isPos(row, col)}"></a>
                </div>
            </div>
        </div>
    </body>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                MAXHEIGHT: 50,
                MAXWDITH: 50,
                snackPos: [],
                head: [0, 0],
                food: [0, 0],
                direction: 1,
                dead: false
            },
            mounted() {
                const self = this
                this.head = this.randomPos(10, this.MAXHEIGHT - 10, 10, this.MAXWDITH)
                this.snackPos.push([this.head[0], this.head[1]])
                this.snackPos.push([this.head[0], this.head[1] - 1])
                this.snackPos.push([this.head[0], this.head[1] - 2])
                this.snackPos.push([this.head[0], this.head[1] - 3])
                this.snackPos.push([this.head[0], this.head[1] - 4])
                this.food = this.randomPos()
                this.move()
                setInterval(function() {
                    self.move()
                    self.auto()
                    self.eat()
                    self.isDie()
                }, 100)
            },
            methods: {
                snackIsContains(row, col) {
                    for (let val of this.snackPos) {
                        if (val[0] == row && val[1] == col) return true
                    }
                    return false
                },
                randomPos(rowMin = 0, rowMax = this.MAXHEIGHT, colMin = 0, colMax = this.MAXWDITH) {
                    let pos = [Math.floor((rowMax - rowMin) * Math.random()) + rowMin, Math.floor((colMax - colMin) * Math.random() + colMin)]
                    while (this.snackIsContains[pos[0], pos[1]]) {
                        pos = [Math.floor((rowMax - rowMin) * Math.random()) + rowMin, Math.floor((colMax - colMin) * Math.random() + colMin)]
                    }
                    return pos
                },
                isPos(row, col) {
                    return this.snackIsContains(row, col) || ( row == this.food[0] && col == this.food[1])
                },
                move() {
                    const self = this
                    for (let i = self.snackPos.length - 1; i > 0; i--) {
                        Vue.set(self.snackPos, i, self.snackPos[i - 1])
                    }
                    if (self.direction == 0) {
                        Vue.set(self.snackPos, 0, [self.snackPos[0][0] - 1, self.snackPos[0][1]])
                    } else if (self.direction == 1) {
                        Vue.set(self.snackPos, 0, [self.snackPos[0][0], self.snackPos[0][1] + 1])
                    } else if (self.direction == 2) {
                        Vue.set(self.snackPos, 0, [self.snackPos[0][0] + 1, self.snackPos[0][1]])
                    } else if (self.direction == 3) {
                        Vue.set(self.snackPos, 0, [self.snackPos[0][0], self.snackPos[0][1] - 1])
                    }
                },
                auto() {
                    if (this.snackPos[0][0] == 1 && this.snackPos[0][1] == 1) {
                        if (this.direction == 0) this.direction = 1
                        else this.direction = 2
                    } else if (this.snackPos[0][0] == this.MAXHEIGHT && this.snackPos[0][1] == 1) {
                        if (this.direction == 2) this.direction = 1
                        else this.direction = 0
                    } else if (this.snackPos[0][0] == 1 && this.snackPos[0][1] == this.MAXWDITH) {
                        if (this.direction == 0) this.direction = 3
                        else this.direction = 2
                    } else if (this.snackPos[0][0] == this.MAXHEIGHT && this.snackPos[0][1] == this.MAXWDITH) {
                        if (this.direction == 1) this.direction = 0
                        else this.direction = 3
                    } else if ((this.snackPos[0][0] == 1 && this.direction == 0) || (this.snackPos[0][0] == this.MAXHEIGHT && this.direction == 2)) {
                        this.direction = [1, 3][Math.floor(2 * Math.random())]
                    } else if ((this.snackPos[0][1] == 1 && this.direction == 3) || (this.snackPos[0][1] == this.MAXWDITH && this.direction == 1)) {
                        this.direction = [0, 2][Math.floor(2 * Math.random())]
                    }
                },
                eat() {
                    if (this.food[0] == this.snackPos[0][0] && this.food[1] == this.snackPos[0][1]) {
                        this.snackPos.push([this.snackPos[this.snackPos.length - 1][0], this.snackPos[this.snackPos.length - 1][1]])
                        this.food = this.randomPos()
                    }
                },
                isDie() {
                    if(this.snackIsContains(this.snackPos[0][0], this.snackPos[0][1])) this.dead = true
                }
            }
        })
    </script>
    <style>
        #app {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #main {
            width: 300px;
            height: 300px;
        }
        .box {
            width: 6px;
            height: 6px;
            background-color: black;
            display: inline-block;
            vertical-align: top;
        }
        .box-row {
            height: 6px;
        }
        .snack {
            background-color: white;
        }
    </style>
</html>